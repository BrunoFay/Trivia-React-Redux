{"ast":null,"code":"var _jsxFileName = \"/home/bruno/Documentos/MeusProjetos/Projetos-Trybe/front-end/sd-016-b-project-trivia-react-redux/src/components/Question.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { AiOutlineDoubleRight } from 'react-icons/ai';\nimport { getAssertion, getScore, nextQuestion, timer } from '../redux/actions';\nimport { addLocalStorage, loadLocalStorage } from '../localStorage';\nconst INITIAL_STATE = {\n  count: 30,\n  answers: [],\n  counterFinished: false,\n  wasAnswered: false\n};\n\nclass Question extends Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n    this.counter = 0;\n    this.randomAnswer = this.randomAnswer.bind(this);\n    this.timer = this.timer.bind(this);\n    this.changeTime = this.changeTime.bind(this);\n    this.sortAnswers = this.sortAnswers.bind(this);\n    this.btnHandle = this.btnHandle.bind(this);\n    this.score = this.score.bind(this);\n    this.nextHandle = this.nextHandle.bind(this);\n  }\n\n  componentDidMount() {\n    this.sortAnswers();\n    this.timer();\n  }\n\n  sortAnswers() {\n    const {\n      result: {\n        correct_answer: correctAnswer,\n        incorrect_answers: incorrectAnswers\n      }\n    } = this.props;\n    const sortAnswers = [...incorrectAnswers, correctAnswer].sort(this.randomAnswer);\n    this.setState({\n      answers: sortAnswers\n    });\n  }\n\n  randomAnswer() {\n    const testNumber = 0.5;\n    return testNumber - Math.random();\n  } // ref: https://stackoverflow.com/questions/40885923/countdown-timer-in-react\n\n\n  changeTime() {\n    const {\n      state: {\n        count\n      },\n      props: {\n        handleTimer\n      }\n    } = this;\n\n    if (count > 0) {\n      this.setState(prevState => ({\n        count: prevState.count - 1\n      }));\n      handleTimer(count);\n    } else if (count === 0) {\n      clearInterval(this.counter);\n      this.setState({\n        counterFinished: true,\n        wasAnswered: true\n      });\n      handleTimer(count);\n    }\n  }\n\n  timer() {\n    const seconds = 1000;\n    this.counter = setInterval(this.changeTime, seconds);\n  }\n\n  styleBtn(nameId) {\n    const btns = document.querySelectorAll('.btn-game');\n    btns.forEach(btn => {\n      const testId = btn.getAttribute('data-testid');\n\n      if (testId === nameId) {\n        btn.style.border = '3px solid rgb(6, 240, 15)';\n      } else {\n        btn.style.border = '3px solid rgb(255, 0, 0)';\n      }\n    });\n  }\n\n  btnHandle(event) {\n    const nameId = 'correct-answer';\n    this.styleBtn(nameId);\n    this.score(event, nameId);\n    this.setState({\n      wasAnswered: true\n    });\n  }\n\n  nextHandle() {\n    const {\n      nextButtomAction,\n      index,\n      history\n    } = this.props;\n    const maxLength = 4;\n    this.changeTime();\n    nextButtomAction();\n    this.setState(INITIAL_STATE, () => {\n      this.sortAnswers();\n    });\n\n    if (index === maxLength) {\n      history.push('/feedback');\n    }\n  }\n\n  score(_ref, nameId) {\n    let {\n      target\n    } = _ref;\n    const {\n      props: {\n        result: {\n          difficulty\n        },\n        getScoreAction,\n        assertionDispatch\n      },\n      state: {\n        count\n      }\n    } = this;\n    const testId = target.getAttribute('data-testid');\n\n    if (testId === nameId) {\n      const difficultyTypes = {\n        hard: 3,\n        medium: 2,\n        easy: 1\n      };\n      const initialScore = 10;\n      const score = initialScore + count * difficultyTypes[difficulty];\n      getScoreAction(score);\n      assertionDispatch();\n      const prevLocalStorage = loadLocalStorage('score');\n      addLocalStorage('score', score + prevLocalStorage);\n    }\n  }\n\n  render() {\n    const {\n      result: {\n        category,\n        question,\n        incorrect_answers: incorrectAnswers\n      },\n      index: indexQuestions\n    } = this.props;\n    const {\n      answers,\n      counterFinished,\n      wasAnswered\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      id: \"trivia-game\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      id: \"questionSection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"category\",\n      \"data-testid\": \"question-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, category), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"question\",\n      \"data-testid\": \"question-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, question), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"num-question\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, indexQuestions + 1, \"/5\")), /*#__PURE__*/React.createElement(\"section\", {\n      id: \"answers\",\n      \"data-testid\": \"answer-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, answers.map((answer, index) => /*#__PURE__*/React.createElement(\"button\", {\n      id: `Answer${index}`,\n      type: \"button\",\n      className: \"btn-game\",\n      key: answer,\n      disabled: counterFinished || wasAnswered,\n      onClick: this.btnHandle,\n      \"data-testid\": incorrectAnswers.includes(answer) ? `wrong-answer-${index}` : 'correct-answer',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, answer))), wasAnswered && /*#__PURE__*/React.createElement(\"button\", {\n      id: \"btn-next\",\n      \"data-testid\": \"btn-next\",\n      type: \"button\",\n      onClick: this.nextHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, \"Next\", /*#__PURE__*/React.createElement(AiOutlineDoubleRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nQuestion.propTypes = {\n  getScoreAction: PropTypes.func.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired,\n  index: PropTypes.number.isRequired,\n  nextButtomAction: PropTypes.func.isRequired,\n  result: PropTypes.shape({\n    category: PropTypes.string,\n    question: PropTypes.string,\n    correct_answer: PropTypes.string,\n    incorrect_answers: PropTypes.array,\n    difficulty: PropTypes.string\n  }).isRequired,\n  assertionDispatch: PropTypes.func.isRequired,\n  timerDispatch: PropTypes.func.isRequired\n};\n\nconst mapDispatchToProps = dispatch => ({\n  getScoreAction: score => dispatch(getScore(score)),\n  nextButtomAction: () => dispatch(nextQuestion()),\n  assertionDispatch: () => dispatch(getAssertion()),\n  timerDispatch: count => dispatch(timer(count))\n});\n\nexport default connect(null, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/bruno/Documentos/MeusProjetos/Projetos-Trybe/front-end/sd-016-b-project-trivia-react-redux/src/components/Question.js"],"names":["React","Component","PropTypes","connect","AiOutlineDoubleRight","getAssertion","getScore","nextQuestion","timer","addLocalStorage","loadLocalStorage","INITIAL_STATE","count","answers","counterFinished","wasAnswered","Question","constructor","props","state","counter","randomAnswer","bind","changeTime","sortAnswers","btnHandle","score","nextHandle","componentDidMount","result","correct_answer","correctAnswer","incorrect_answers","incorrectAnswers","sort","setState","testNumber","Math","random","handleTimer","prevState","clearInterval","seconds","setInterval","styleBtn","nameId","btns","document","querySelectorAll","forEach","btn","testId","getAttribute","style","border","event","nextButtomAction","index","history","maxLength","push","target","difficulty","getScoreAction","assertionDispatch","difficultyTypes","hard","medium","easy","initialScore","prevLocalStorage","render","category","question","indexQuestions","map","answer","includes","propTypes","func","isRequired","shape","number","string","array","timerDispatch","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,oBAAT,QAAqC,gBAArC;AACA,SAASC,YAAT,EAAuBC,QAAvB,EAAiCC,YAAjC,EAA+CC,KAA/C,QAA4D,kBAA5D;AACA,SAASC,eAAT,EAA0BC,gBAA1B,QAAkD,iBAAlD;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,KAAK,EAAE,EADa;AAEpBC,EAAAA,OAAO,EAAE,EAFW;AAGpBC,EAAAA,eAAe,EAAE,KAHG;AAIpBC,EAAAA,WAAW,EAAE;AAJO,CAAtB;;AAOA,MAAMC,QAAN,SAAuBf,SAAvB,CAAiC;AAC/BgB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAaR,aAAb;AAEA,SAAKS,OAAL,GAAe,CAAf;AAEA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKd,KAAL,GAAa,KAAKA,KAAL,CAAWc,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKG,SAAL,GAAiB,KAAKA,SAAL,CAAeH,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKI,KAAL,GAAa,KAAKA,KAAL,CAAWJ,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKK,UAAL,GAAkB,KAAKA,UAAL,CAAgBL,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDM,EAAAA,iBAAiB,GAAG;AAClB,SAAKJ,WAAL;AACA,SAAKhB,KAAL;AACD;;AAEDgB,EAAAA,WAAW,GAAG;AACZ,UAAM;AACJK,MAAAA,MAAM,EAAE;AACNC,QAAAA,cAAc,EAAEC,aADV;AAENC,QAAAA,iBAAiB,EAAEC;AAFb;AADJ,QAKF,KAAKf,KALT;AAOA,UAAMM,WAAW,GAAG,CAAC,GAAGS,gBAAJ,EAAsBF,aAAtB,EAAqCG,IAArC,CAClB,KAAKb,YADa,CAApB;AAIA,SAAKc,QAAL,CAAc;AAAEtB,MAAAA,OAAO,EAAEW;AAAX,KAAd;AACD;;AAEDH,EAAAA,YAAY,GAAG;AACb,UAAMe,UAAU,GAAG,GAAnB;AACA,WAAOA,UAAU,GAAGC,IAAI,CAACC,MAAL,EAApB;AACD,GAxC8B,CA0C/B;;;AACAf,EAAAA,UAAU,GAAG;AACX,UAAM;AAAEJ,MAAAA,KAAK,EAAE;AAAEP,QAAAA;AAAF,OAAT;AAAoBM,MAAAA,KAAK,EAAE;AAAEqB,QAAAA;AAAF;AAA3B,QAA8C,IAApD;;AACA,QAAI3B,KAAK,GAAG,CAAZ,EAAe;AACb,WAAKuB,QAAL,CAAeK,SAAD,KAAgB;AAAE5B,QAAAA,KAAK,EAAE4B,SAAS,CAAC5B,KAAV,GAAkB;AAA3B,OAAhB,CAAd;AACA2B,MAAAA,WAAW,CAAC3B,KAAD,CAAX;AAED,KAJD,MAIO,IAAIA,KAAK,KAAK,CAAd,EAAiB;AACtB6B,MAAAA,aAAa,CAAC,KAAKrB,OAAN,CAAb;AACA,WAAKe,QAAL,CAAc;AAAErB,QAAAA,eAAe,EAAE,IAAnB;AAAyBC,QAAAA,WAAW,EAAE;AAAtC,OAAd;AACAwB,MAAAA,WAAW,CAAC3B,KAAD,CAAX;AACD;AACF;;AAEDJ,EAAAA,KAAK,GAAG;AACN,UAAMkC,OAAO,GAAG,IAAhB;AACA,SAAKtB,OAAL,GAAeuB,WAAW,CAAC,KAAKpB,UAAN,EAAkBmB,OAAlB,CAA1B;AACD;;AAEDE,EAAAA,QAAQ,CAACC,MAAD,EAAS;AACf,UAAMC,IAAI,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAb;AAEAF,IAAAA,IAAI,CAACG,OAAL,CAAcC,GAAD,IAAS;AACpB,YAAMC,MAAM,GAAGD,GAAG,CAACE,YAAJ,CAAiB,aAAjB,CAAf;;AAEA,UAAID,MAAM,KAAKN,MAAf,EAAuB;AACrBK,QAAAA,GAAG,CAACG,KAAJ,CAAUC,MAAV,GAAmB,2BAAnB;AACD,OAFD,MAEO;AACLJ,QAAAA,GAAG,CAACG,KAAJ,CAAUC,MAAV,GAAmB,0BAAnB;AACD;AACF,KARD;AASD;;AAED7B,EAAAA,SAAS,CAAC8B,KAAD,EAAQ;AACf,UAAMV,MAAM,GAAG,gBAAf;AACA,SAAKD,QAAL,CAAcC,MAAd;AACA,SAAKnB,KAAL,CAAW6B,KAAX,EAAkBV,MAAlB;AACA,SAAKV,QAAL,CAAc;AAAEpB,MAAAA,WAAW,EAAE;AAAf,KAAd;AACD;;AAEDY,EAAAA,UAAU,GAAG;AACX,UAAM;AACJ6B,MAAAA,gBADI;AAEJC,MAAAA,KAFI;AAGJC,MAAAA;AAHI,QAKF,KAAKxC,KALT;AAMA,UAAMyC,SAAS,GAAG,CAAlB;AACA,SAAKpC,UAAL;AACAiC,IAAAA,gBAAgB;AAChB,SAAKrB,QAAL,CAAcxB,aAAd,EAA6B,MAAM;AACjC,WAAKa,WAAL;AACD,KAFD;;AAKA,QAAIiC,KAAK,KAAKE,SAAd,EAAyB;AACvBD,MAAAA,OAAO,CAACE,IAAR,CAAa,WAAb;AACD;AACF;;AAEDlC,EAAAA,KAAK,OAAamB,MAAb,EAAqB;AAAA,QAApB;AAAEgB,MAAAA;AAAF,KAAoB;AACxB,UAAM;AACJ3C,MAAAA,KAAK,EAAE;AACLW,QAAAA,MAAM,EAAE;AAAEiC,UAAAA;AAAF,SADH;AAELC,QAAAA,cAFK;AAEWC,QAAAA;AAFX,OADH;AAKJ7C,MAAAA,KAAK,EAAE;AAAEP,QAAAA;AAAF;AALH,QAMF,IANJ;AAOA,UAAMuC,MAAM,GAAGU,MAAM,CAACT,YAAP,CAAoB,aAApB,CAAf;;AACA,QAAID,MAAM,KAAKN,MAAf,EAAuB;AACrB,YAAMoB,eAAe,GAAG;AAAEC,QAAAA,IAAI,EAAE,CAAR;AAAWC,QAAAA,MAAM,EAAE,CAAnB;AAAsBC,QAAAA,IAAI,EAAE;AAA5B,OAAxB;AACA,YAAMC,YAAY,GAAG,EAArB;AACA,YAAM3C,KAAK,GAAG2C,YAAY,GAAGzD,KAAK,GAAGqD,eAAe,CAACH,UAAD,CAApD;AACAC,MAAAA,cAAc,CAACrC,KAAD,CAAd;AACAsC,MAAAA,iBAAiB;AACjB,YAAMM,gBAAgB,GAAG5D,gBAAgB,CAAC,OAAD,CAAzC;AACAD,MAAAA,eAAe,CAAC,OAAD,EAAUiB,KAAK,GAAG4C,gBAAlB,CAAf;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AACJ1C,MAAAA,MAAM,EAAE;AACN2C,QAAAA,QADM;AAENC,QAAAA,QAFM;AAGNzC,QAAAA,iBAAiB,EAAEC;AAHb,OADJ;AAKJwB,MAAAA,KAAK,EAAEiB;AALH,QAMF,KAAKxD,KANT;AAQA,UAAM;AAAEL,MAAAA,OAAF;AAAWC,MAAAA,eAAX;AAA4BC,MAAAA;AAA5B,QAA4C,KAAKI,KAAvD;AACA,wBACE;AAAM,MAAA,EAAE,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAS,MAAA,EAAE,EAAC,iBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,EAAE,EAAC,UAAT;AAAoB,qBAAY,mBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqDqD,QAArD,CADF,eAGE;AAAM,MAAA,EAAE,EAAC,UAAT;AAAoB,qBAAY,eAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiDC,QAAjD,CAHF,eAIE;AAAM,MAAA,EAAE,EAAC,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGC,cAAc,GAAG,CADpB,OAJF,CADF,eAWE;AAAS,MAAA,EAAE,EAAC,SAAZ;AAAsB,qBAAY,gBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEG7D,OAAO,CAAC8D,GAAR,CAAY,CAACC,MAAD,EAASnB,KAAT,kBACX;AACE,MAAA,EAAE,EAAI,SAAQA,KAAM,EADtB;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,SAAS,EAAC,UAHZ;AAIE,MAAA,GAAG,EAAGmB,MAJR;AAKE,MAAA,QAAQ,EAAG9D,eAAe,IAAIC,WALhC;AAME,MAAA,OAAO,EAAG,KAAKU,SANjB;AAOE,qBACEQ,gBAAgB,CAAC4C,QAAjB,CAA0BD,MAA1B,IACK,gBAAenB,KAAM,EAD1B,GAEI,gBAVR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAaGmB,MAbH,CADD,CAFH,CAXF,EA+BG7D,WAAW,iBACV;AACE,MAAA,EAAE,EAAC,UADL;AAEE,qBAAY,UAFd;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,OAAO,EAAG,KAAKY,UAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAOE,oBAAC,oBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CAhCJ,CADF;AA4CD;;AAhL8B;;AAmLjCX,QAAQ,CAAC8D,SAAT,GAAqB;AACnBf,EAAAA,cAAc,EAAE7D,SAAS,CAAC6E,IAAV,CAAeC,UADZ;AAEnBtB,EAAAA,OAAO,EAAExD,SAAS,CAAC+E,KAAV,CAAgB;AACvBrB,IAAAA,IAAI,EAAE1D,SAAS,CAAC6E;AADO,GAAhB,EAENC,UAJgB;AAKnBvB,EAAAA,KAAK,EAAEvD,SAAS,CAACgF,MAAV,CAAiBF,UALL;AAMnBxB,EAAAA,gBAAgB,EAAEtD,SAAS,CAAC6E,IAAV,CAAeC,UANd;AAOnBnD,EAAAA,MAAM,EAAE3B,SAAS,CAAC+E,KAAV,CAAgB;AACtBT,IAAAA,QAAQ,EAAEtE,SAAS,CAACiF,MADE;AAEtBV,IAAAA,QAAQ,EAAEvE,SAAS,CAACiF,MAFE;AAGtBrD,IAAAA,cAAc,EAAE5B,SAAS,CAACiF,MAHJ;AAItBnD,IAAAA,iBAAiB,EAAE9B,SAAS,CAACkF,KAJP;AAKtBtB,IAAAA,UAAU,EAAE5D,SAAS,CAACiF;AALA,GAAhB,EAMLH,UAbgB;AAcnBhB,EAAAA,iBAAiB,EAAE9D,SAAS,CAAC6E,IAAV,CAAeC,UAdf;AAenBK,EAAAA,aAAa,EAAEnF,SAAS,CAAC6E,IAAV,CAAeC;AAfX,CAArB;;AAkBA,MAAMM,kBAAkB,GAAIC,QAAD,KAAe;AACxCxB,EAAAA,cAAc,EAAGrC,KAAD,IAAW6D,QAAQ,CAACjF,QAAQ,CAACoB,KAAD,CAAT,CADK;AAExC8B,EAAAA,gBAAgB,EAAE,MAAM+B,QAAQ,CAAChF,YAAY,EAAb,CAFQ;AAGxCyD,EAAAA,iBAAiB,EAAE,MAAMuB,QAAQ,CAAClF,YAAY,EAAb,CAHO;AAIxCgF,EAAAA,aAAa,EAAGzE,KAAD,IAAW2E,QAAQ,CAAC/E,KAAK,CAACI,KAAD,CAAN;AAJM,CAAf,CAA3B;;AAOA,eAAeT,OAAO,CAAC,IAAD,EAAOmF,kBAAP,CAAP,CAAkCtE,QAAlC,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { AiOutlineDoubleRight } from 'react-icons/ai';\nimport { getAssertion, getScore, nextQuestion, timer } from '../redux/actions';\nimport { addLocalStorage, loadLocalStorage } from '../localStorage';\n\nconst INITIAL_STATE = {\n  count: 30,\n  answers: [],\n  counterFinished: false,\n  wasAnswered: false,\n};\n\nclass Question extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = INITIAL_STATE;\n\n    this.counter = 0;\n\n    this.randomAnswer = this.randomAnswer.bind(this);\n    this.timer = this.timer.bind(this);\n    this.changeTime = this.changeTime.bind(this);\n    this.sortAnswers = this.sortAnswers.bind(this);\n    this.btnHandle = this.btnHandle.bind(this);\n    this.score = this.score.bind(this);\n    this.nextHandle = this.nextHandle.bind(this);\n  }\n\n  componentDidMount() {\n    this.sortAnswers();\n    this.timer();\n  }\n\n  sortAnswers() {\n    const {\n      result: {\n        correct_answer: correctAnswer,\n        incorrect_answers: incorrectAnswers,\n      },\n    } = this.props;\n\n    const sortAnswers = [...incorrectAnswers, correctAnswer].sort(\n      this.randomAnswer,\n    );\n\n    this.setState({ answers: sortAnswers });\n  }\n\n  randomAnswer() {\n    const testNumber = 0.5;\n    return testNumber - Math.random();\n  }\n\n  // ref: https://stackoverflow.com/questions/40885923/countdown-timer-in-react\n  changeTime() {\n    const { state: { count }, props: { handleTimer} } = this;\n    if (count > 0) {\n      this.setState((prevState) => ({ count: prevState.count - 1 }));\n      handleTimer(count)\n      ;\n    } else if (count === 0) {\n      clearInterval(this.counter);\n      this.setState({ counterFinished: true, wasAnswered: true });\n      handleTimer(count)\n    }\n  }\n\n  timer() {\n    const seconds = 1000;\n    this.counter = setInterval(this.changeTime, seconds);\n  }\n\n  styleBtn(nameId) {\n    const btns = document.querySelectorAll('.btn-game');\n\n    btns.forEach((btn) => {\n      const testId = btn.getAttribute('data-testid');\n\n      if (testId === nameId) {\n        btn.style.border = '3px solid rgb(6, 240, 15)';\n      } else {\n        btn.style.border = '3px solid rgb(255, 0, 0)';\n      }\n    });\n  }\n\n  btnHandle(event) {\n    const nameId = 'correct-answer';\n    this.styleBtn(nameId);\n    this.score(event, nameId);\n    this.setState({ wasAnswered: true });\n  }\n\n  nextHandle() {\n    const {\n      nextButtomAction,\n      index,\n      history,\n \n    } = this.props;\n    const maxLength = 4;\n    this.changeTime()\n    nextButtomAction();\n    this.setState(INITIAL_STATE, () => {\n      this.sortAnswers();\n    });\n    \n    \n    if (index === maxLength) {\n      history.push('/feedback');\n    }\n  }\n\n  score({ target }, nameId) {\n    const {\n      props: {\n        result: { difficulty },\n        getScoreAction, assertionDispatch,\n      },\n      state: { count },\n    } = this;\n    const testId = target.getAttribute('data-testid');\n    if (testId === nameId) {\n      const difficultyTypes = { hard: 3, medium: 2, easy: 1 };\n      const initialScore = 10;\n      const score = initialScore + count * difficultyTypes[difficulty];\n      getScoreAction(score);\n      assertionDispatch();\n      const prevLocalStorage = loadLocalStorage('score');\n      addLocalStorage('score', score + prevLocalStorage);\n    }\n  }\n\n  render() {\n    const {\n      result: {\n        category,\n        question,\n        incorrect_answers: incorrectAnswers },\n      index: indexQuestions,\n    } = this.props;\n\n    const { answers, counterFinished, wasAnswered } = this.state;\n    return (\n      <main id=\"trivia-game\">\n        <section id=\"questionSection\">\n          <span id=\"category\" data-testid=\"question-category\">{category}</span>\n\n          <span id=\"question\" data-testid=\"question-text\">{question}</span>\n          <span id=\"num-question\">\n            {indexQuestions + 1}\n            /5\n          </span>\n\n        </section>\n        <section id=\"answers\" data-testid=\"answer-options\">\n\n          {answers.map((answer, index) => (\n            <button\n              id={ `Answer${index}` }\n              type=\"button\"\n              className=\"btn-game\"\n              key={ answer }\n              disabled={ counterFinished || wasAnswered }\n              onClick={ this.btnHandle }\n              data-testid={\n                incorrectAnswers.includes(answer)\n                  ? `wrong-answer-${index}`\n                  : 'correct-answer'\n              }\n            >\n              {answer}\n            </button>\n          ))}\n        </section>\n        {wasAnswered && (\n          <button\n            id=\"btn-next\"\n            data-testid=\"btn-next\"\n            type=\"button\"\n            onClick={ this.nextHandle }\n          >\n            Next\n            <AiOutlineDoubleRight />\n          </button>)}\n      </main>\n    );\n  }\n}\n\nQuestion.propTypes = {\n  getScoreAction: PropTypes.func.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  index: PropTypes.number.isRequired,\n  nextButtomAction: PropTypes.func.isRequired,\n  result: PropTypes.shape({\n    category: PropTypes.string,\n    question: PropTypes.string,\n    correct_answer: PropTypes.string,\n    incorrect_answers: PropTypes.array,\n    difficulty: PropTypes.string,\n  }).isRequired,\n  assertionDispatch: PropTypes.func.isRequired,\n  timerDispatch: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  getScoreAction: (score) => dispatch(getScore(score)),\n  nextButtomAction: () => dispatch(nextQuestion()),\n  assertionDispatch: () => dispatch(getAssertion()),\n  timerDispatch: (count) => dispatch(timer(count)),\n});\n\nexport default connect(null, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}